<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progress Tracking - AI Personal Trainer Assistant</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="stylesheet" href="../css/professional.css">
    <link rel="stylesheet" href="../css/responsive.css">
    </head>

<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <a href="../index.html" style="text-decoration: none; color: inherit; cursor: pointer;">
                <h1>AI Trainer</h1>
            </a>
            <button class="sidebar-toggle" type="button" aria-label="Toggle sidebar" title="Toggle sidebar">
                <span class="hamburger-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </span>
            </button>
        </div>
        <nav>
            <ul>
                <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
                <li><a href="muscle-workout.html" class="nav-link">Muscle Workout</a></li>
                <li><a href="select-trainer.html" class="nav-link">Select Trainer</a></li>
                <li><a href="messages.html" class="nav-link">Messages</a></li>
                <li><a href="notifications.html" class="nav-link">Notifications</a></li>
                <li><a href="ai-suggestions.html" class="nav-link">AI Suggestions</a></li>
                <li id="diet-plan-item"><a href="diet-plan.html" class="nav-link">AI Diet Plan</a></li>
                <li><a href="progress.html" class="nav-link">View Progress</a></li>
                <li><a href="profile.html" class="nav-link">Profile</a></li>
                <li><a href="#" class="nav-link" id="logout-link">Logout</a></li>
            </ul>
        </nav>
    </div>

    <main>
        <!-- Progress Header with Time Range Selector -->
        <section id="progress-header" style="margin-bottom: 30px;">
            <h2 style="margin-bottom: 20px;">Your Fitness Progress</h2>
            
            <!-- Time Range Filter Buttons -->
            <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 30px;">
                <button class="time-range-btn active" data-range="today" style="padding: 10px 20px; background: #1E40AF; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 14px;">Today</button>
                <button class="time-range-btn" data-range="week" style="padding: 10px 20px; background: #E5E7EB; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 14px;">This Week</button>
                <button class="time-range-btn" data-range="month" style="padding: 10px 20px; background: #E5E7EB; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 14px;">This Month</button>
                <button class="time-range-btn" data-range="all" style="padding: 10px 20px; background: #E5E7EB; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 14px;">All Time</button>
            </div>

            <!-- Key Metrics Cards -->
            <div class="dashboard-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                <div class="stats-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 12px;">
                    <div style="font-size: 24px; margin-bottom: 10px;"></div>
                    <h3 style="margin: 0 0 10px 0; font-size: 14px; color: rgba(255,255,255,0.8);">Workouts</h3>
                    <div style="font-size: 32px; font-weight: bold; margin-bottom: 5px;" id="metric-workouts">0</div>
                    <p style="margin: 0; font-size: 12px; color: rgba(255,255,255,0.7);" id="metric-workouts-label">in this period</p>
                </div>

                <div class="stats-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 25px; border-radius: 12px;">
                    <div style="font-size: 24px; margin-bottom: 10px;"></div>
                    <h3 style="margin: 0 0 10px 0; font-size: 14px; color: rgba(255,255,255,0.8);">Calories Burned</h3>
                    <div style="font-size: 32px; font-weight: bold; margin-bottom: 5px;" id="metric-calories">0</div>
                    <p style="margin: 0; font-size: 12px; color: rgba(255,255,255,0.7);" id="metric-calories-label">kcal burned</p>
                </div>

                <div class="stats-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 25px; border-radius: 12px;">
                    <div style="font-size: 24px; margin-bottom: 10px;"></div>
                    <h3 style="margin: 0 0 10px 0; font-size: 14px; color: rgba(255,255,255,0.8);">Total Time</h3>
                    <div style="font-size: 32px; font-weight: bold; margin-bottom: 5px;" id="metric-time">0h</div>
                    <p style="margin: 0; font-size: 12px; color: rgba(255,255,255,0.7);" id="metric-time-label">training time</p>
                </div>

                <div class="stats-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 25px; border-radius: 12px;">
                    <div style="font-size: 24px; margin-bottom: 10px;"></div>
                    <h3 style="margin: 0 0 10px 0; font-size: 14px; color: rgba(255,255,255,0.8);">Avg Sets/Reps</h3>
                    <div style="font-size: 32px; font-weight: bold; margin-bottom: 5px;" id="metric-avg-sets">0</div>
                    <p style="margin: 0; font-size: 12px; color: rgba(255,255,255,0.7);" id="metric-avg-reps">sets completed</p>
                </div>
            </div>
        </section>

        <!-- Detailed Progress View -->
        <section id="detailed-progress">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="margin: 0;">Workout Details</h3>
                <span id="progress-count" style="background: #1E40AF; color: white; padding: 5px 15px; border-radius: 20px; font-size: 14px; font-weight: 600;">0 workouts</span>
            </div>
            <div id="progress-list" style="max-height: 600px; overflow-y: auto;">
                <div class="empty-state">
                    <h3>No workouts recorded</h3>
                    <p>Start logging workouts to see your detailed progress</p>
                </div>
            </div>
        </section>

        <!-- Date Selector and Calendar View -->
        <section id="calendar-section" style="margin-top: 40px;">
            <h3 style="margin-bottom: 20px;">Workout Calendar</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <!-- Date Picker -->
                <div style="background: #F8F9FA; padding: 20px; border-radius: 12px;">
                    <h4 style="margin-top: 0;">Select Date</h4>
                    <input type="date" id="progress-date-picker" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px;">
                    <button id="view-date-btn" style="width: 100%; margin-top: 10px; padding: 10px; background: #1E40AF; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">View Date</button>
                </div>

                <!-- Date-Specific Workouts -->
                <div style="background: #F8F9FA; padding: 20px; border-radius: 12px;">
                    <h4 style="margin-top: 0;">Selected Date Details</h4>
                    <div id="date-specific-workouts" style="font-size: 14px; color: #666;">
                        <p>Select a date to view workouts</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
            </div>
        </section>
    </main>

    <div class="footer">
        <p>&copy; 2025 AI Personal Trainer Assistant. All rights reserved.</p>
    </div>

    <script src="../js/clear-old-tokens.js"></script>
    <script src="../js/storage.js"></script>
    <script src="../js/nav.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/toast.js"></script>
    <script src="http://localhost:8000/socket.io/socket.io.js"></script>
    <script src="../js/progress.js"></script>

    <style>
        #progress-data .progress-card {
            background: var(--light-bg);
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 4px solid var(--accent-color);
        }

        #progress-data h4 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
        }

        #progress-data p {
            margin: 5px 0;
            color: var(--text-light);
            font-size: 14px;
        }
    </style>

    <script>
        // Global variables
        let currentTimeRange = 'today';
        let allWorkoutsData = [];
        const API_URL = 'http://localhost:8000/api';

        // Initialize date picker with today's date
        const today = new Date().toISOString().split('T')[0];
        const datePickerInput = document.getElementById('progress-date-picker');
        if (datePickerInput) {
            datePickerInput.value = today;
        }

        document.addEventListener("DOMContentLoaded", function () {
            const token = storage.getToken();
            if (!token) {
                window.location.href = "login.html";
                return;
            }

            const currentUser = storage.getCurrentUser();
            if (!currentUser) {
                showToast('Please login to view progress', 'warning', 3000);
                setTimeout(() => window.location.href = 'login.html', 1500);
                return;
            }

            // Time range filter button handling
            const timeRangeBtns = document.querySelectorAll('.time-range-btn');
            timeRangeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    timeRangeBtns.forEach(b => {
                        b.style.background = '#E5E7EB';
                        b.style.color = '#333';
                        b.classList.remove('active');
                    });
                    this.style.background = '#1E40AF';
                    this.style.color = 'white';
                    this.classList.add('active');
                    
                    currentTimeRange = this.getAttribute('data-range');
                    loadProgressByTimeRange(currentTimeRange);
                });
            });

            // Date picker button
            const viewDateBtn = document.getElementById('view-date-btn');
            if (viewDateBtn) {
                viewDateBtn.addEventListener('click', function() {
                    const selectedDate = document.getElementById('progress-date-picker').value;
                    loadWorkoutsByDate(selectedDate);
                });
            }

            // Date picker enter key
            if (datePickerInput) {
                datePickerInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        loadWorkoutsByDate(this.value);
                    }
                });
            }

            const logoutLink = document.getElementById("logout-link");
            if (logoutLink) {
                logoutLink.addEventListener("click", function (e) {
                    e.preventDefault();
                    storage.clearToken();
                    storage.clearUser();
                    window.location.href = 'login.html';
                });
            }

            // Load initial data for today
            loadAllWorkoutsFromDatabase();
        });

        // Fetch all workouts from database
        async function loadAllWorkoutsFromDatabase() {
            try {
                const token = storage.getToken();
                if (!token) {
                    showToast('Please login to view progress', 'warning', 3000);
                    return;
                }

                // Show loading state
                document.getElementById('progress-list').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 48px; margin-bottom: 10px;">‚è≥</div>
                        <p>Loading your workout data...</p>
                    </div>
                `;

                const response = await fetch(`${API_URL}/progress?filter=all`, {
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    if (response.status === 401) {
                        showToast('Session expired. Please login again', 'warning', 3000);
                        setTimeout(() => window.location.href = 'login.html', 1500);
                        return;
                    }
                    throw new Error('Failed to fetch workouts');
                }

                const data = await response.json();
                
                if (data.success) {
                    allWorkoutsData = data.workouts || [];
                    console.log(`Loaded ${allWorkoutsData.length} workouts from database`);
                    
                    // Load data for current time range
                    loadProgressByTimeRange(currentTimeRange);
                } else {
                    throw new Error(data.message || 'Failed to load workouts');
                }
            } catch (error) {
                console.error('Error loading workouts:', error);
                showToast('Failed to load workout data', 'error', 5000);
                
                document.getElementById('progress-list').innerHTML = `
                    <div class="empty-state">
                        <h3>‚ö†Ô∏è Error loading data</h3>
                        <p>${error.message}</p>
                        <button onclick="loadAllWorkoutsFromDatabase()" style="margin-top: 15px; padding: 10px 20px; background: #1E40AF; color: white; border: none; border-radius: 6px; cursor: pointer;">Retry</button>
                    </div>
                `;
            }
        }

        async function loadProgressByTimeRange(range) {
            try {
                const now = new Date();
                let filteredWorkouts = [];

                const getStartOfDay = (date) => {
                    const d = new Date(date);
                    d.setHours(0, 0, 0, 0);
                    return d;
                };

                const getStartOfWeek = (date) => {
                    const d = new Date(date);
                    const day = d.getDay();
                    const diff = d.getDate() - day;
                    const weekStart = new Date(d.setDate(diff));
                    weekStart.setHours(0, 0, 0, 0);
                    return weekStart;
                };

                const getStartOfMonth = (date) => {
                    const monthStart = new Date(date.getFullYear(), date.getMonth(), 1);
                    monthStart.setHours(0, 0, 0, 0);
                    return monthStart;
                };

                const todayStart = getStartOfDay(now);

                switch(range) {
                    case 'today':
                        filteredWorkouts = allWorkoutsData.filter(w => {
                            const wDate = new Date(w.date);
                            return getStartOfDay(wDate).getTime() === todayStart.getTime();
                        });
                        break;
                    case 'week':
                        const weekStart = getStartOfWeek(now);
                        filteredWorkouts = allWorkoutsData.filter(w => {
                            const wDate = new Date(w.date);
                            return wDate >= weekStart && wDate <= now;
                        });
                        break;
                    case 'month':
                        const monthStart = getStartOfMonth(now);
                        filteredWorkouts = allWorkoutsData.filter(w => {
                            const wDate = new Date(w.date);
                            return wDate >= monthStart && wDate <= now;
                        });
                        break;
                    case 'all':
                        filteredWorkouts = allWorkoutsData;
                        break;
                }

                console.log(`Filtered ${filteredWorkouts.length} workouts for range: ${range}`);
                displayProgressMetrics(filteredWorkouts, range);
                displayProgressList(filteredWorkouts);
            } catch (error) {
                console.error('Error loading progress data:', error);
                showToast('Error filtering workout data', 'error', 4000);
            }
        }

        function displayProgressMetrics(workouts, range) {
            const totalWorkouts = workouts.length;
            const totalCalories = workouts.reduce((sum, w) => sum + (w.totalCalories || 0), 0);
            const totalMinutes = workouts.reduce((sum, w) => sum + (w.totalDuration || 0), 0);
            
            // Calculate average sets across all exercises
            let totalSets = 0;
            let totalReps = 0;
            let exerciseCount = 0;
            
            workouts.forEach(w => {
                if (w.exercises && Array.isArray(w.exercises)) {
                    w.exercises.forEach(ex => {
                        totalSets += ex.sets || 0;
                        totalReps += ex.reps || 0;
                        exerciseCount++;
                    });
                }
            });

            const avgSets = exerciseCount > 0 ? (totalSets / exerciseCount).toFixed(1) : 0;
            const avgReps = exerciseCount > 0 ? (totalReps / exerciseCount).toFixed(1) : 0;

            const hours = Math.floor(totalMinutes / 60);
            const mins = totalMinutes % 60;
            const timeStr = hours > 0 ? `${hours}h ${mins}m` : `${mins}m`;

            // Update metric cards
            document.getElementById('metric-workouts').textContent = totalWorkouts;
            document.getElementById('metric-calories').textContent = totalCalories.toLocaleString();
            document.getElementById('metric-time').textContent = timeStr;
            document.getElementById('metric-avg-sets').textContent = avgSets;

            // Update labels based on range
            const labels = {
                'today': 'today',
                'week': 'this week',
                'month': 'this month',
                'all': 'all time'
            };

            document.getElementById('metric-workouts-label').textContent = `in ${labels[range]}`;
            document.getElementById('metric-calories-label').textContent = `kcal burned`;
            document.getElementById('metric-time-label').textContent = `training time`;
            document.getElementById('metric-avg-reps').textContent = `avg ${avgReps} reps per set`;
        }

        function displayProgressList(workouts) {
            const container = document.getElementById('progress-list');
            const countSpan = document.getElementById('progress-count');

            if (!workouts || workouts.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div style="font-size: 64px; margin-bottom: 15px;">üìä</div>
                        <h3>No workouts recorded</h3>
                        <p>Start logging workouts to see your detailed progress</p>
                        <a href="muscle-workout.html" style="display: inline-block; margin-top: 15px; padding: 12px 24px; background: #1E40AF; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;">Start a Workout</a>
                    </div>
                `;
                countSpan.textContent = '0 workouts';
                return;
            }

            countSpan.textContent = `${workouts.length} workout${workouts.length !== 1 ? 's' : ''}`;
            
            let html = '';
            
            // Sort workouts by date (newest first)
            const sortedWorkouts = [...workouts].sort((a, b) => new Date(b.date) - new Date(a.date));

            sortedWorkouts.forEach(workout => {
                const date = new Date(workout.date);
                const formattedDate = date.toLocaleDateString('en-US', {
                    weekday: 'short',
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                const formattedTime = date.toLocaleTimeString('en-US', {
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                });

                // Extract exercise names
                let exercisesList = '';
                if (workout.exercises && Array.isArray(workout.exercises)) {
                    const exerciseNames = workout.exercises.map(e => e.name || 'Exercise').slice(0, 3);
                    exercisesList = exerciseNames.join(', ');
                    if (workout.exercises.length > 3) {
                        exercisesList += ` +${workout.exercises.length - 3} more`;
                    }
                } else {
                    exercisesList = workout.notes || 'Workout completed';
                }

                // Calculate total sets and reps
                let totalSets = 0;
                let totalReps = 0;
                if (workout.exercises && Array.isArray(workout.exercises)) {
                    workout.exercises.forEach(ex => {
                        totalSets += ex.sets || 0;
                        totalReps += ex.reps || 0;
                    });
                }

                // Intensity color
                const intensityColors = {
                    'low': '#43e97b',
                    'moderate': '#4facfe',
                    'high': '#f5576c'
                };
                const intensityColor = intensityColors[workout.intensity] || '#1E40AF';

                html += `
                    <div style="background: white; border-left: 4px solid ${intensityColor}; padding: 20px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); transition: transform 0.2s, box-shadow 0.2s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.12)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.08)';">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                            <div>
                                <h4 style="margin: 0 0 5px 0; color: #1E40AF; font-size: 16px; font-weight: 700;">üìÖ ${formattedDate}</h4>
                                <p style="margin: 0; color: #999; font-size: 13px;">‚è∞ ${formattedTime}</p>
                            </div>
                            <span style="background: ${intensityColor}; color: white; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; text-transform: capitalize;">${workout.intensity || 'Moderate'}</span>
                        </div>
                        <div style="margin: 12px 0; padding: 10px; background: #f8f9fa; border-radius: 6px;">
                            <p style="margin: 0; color: #333; font-size: 14px; font-weight: 500;">üí™ ${exercisesList}</p>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-top: 12px;">
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 6px; text-align: center;">
                                <p style="margin: 0; color: #666; font-size: 12px;">‚è±Ô∏è Duration</p>
                                <p style="margin: 5px 0 0 0; color: #1E40AF; font-weight: 700; font-size: 16px;">${workout.totalDuration || 0} min</p>
                            </div>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 6px; text-align: center;">
                                <p style="margin: 0; color: #666; font-size: 12px;">üî• Calories</p>
                                <p style="margin: 5px 0 0 0; color: #1E40AF; font-weight: 700; font-size: 16px;">${workout.totalCalories || 0} kcal</p>
                            </div>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 6px; text-align: center;">
                                <p style="margin: 0; color: #666; font-size: 12px;">üìä Sets</p>
                                <p style="margin: 5px 0 0 0; color: #1E40AF; font-weight: 700; font-size: 16px;">${totalSets}</p>
                            </div>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 6px; text-align: center;">
                                <p style="margin: 0; color: #666; font-size: 12px;">üî¢ Total Reps</p>
                                <p style="margin: 5px 0 0 0; color: #1E40AF; font-weight: 700; font-size: 16px;">${totalReps}</p>
                            </div>
                        </div>
                        ${workout.notes ? `<div style="margin-top: 12px; padding: 10px; background: #fff3cd; border-radius: 6px; border-left: 3px solid #ffc107;"><p style="margin: 0; color: #856404; font-size: 13px;">üìù ${workout.notes}</p></div>` : ''}
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        async function loadWorkoutsByDate(selectedDate) {
            try {
                const selectedDateObj = new Date(selectedDate + 'T00:00:00');
                const workoutsOnDate = allWorkoutsData.filter(w => {
                    const wDate = new Date(w.date);
                    const wDateStart = new Date(wDate.getFullYear(), wDate.getMonth(), wDate.getDate());
                    const selectedStart = new Date(selectedDateObj.getFullYear(), selectedDateObj.getMonth(), selectedDateObj.getDate());
                    return wDateStart.getTime() === selectedStart.getTime();
                });

                const container = document.getElementById('date-specific-workouts');
                const selectedDateFormatted = selectedDateObj.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                if (!workoutsOnDate || workoutsOnDate.length === 0) {
                    container.innerHTML = `
                        <p style="color: #999; margin: 0 0 8px 0;"><strong>${selectedDateFormatted}</strong></p>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; text-align: center;">
                            <p style="color: #999; margin: 0;">üì≠ No workouts recorded on this date</p>
                        </div>
                    `;
                    return;
                }

                let html = `<p style="margin: 0 0 12px 0; font-weight: 700; color: #1E40AF; font-size: 15px;">üìÖ ${selectedDateFormatted}</p>`;
                
                workoutsOnDate.forEach((workout, index) => {
                    const time = new Date(workout.date).toLocaleTimeString('en-US', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });

                    let exercisesList = '';
                    if (workout.exercises && Array.isArray(workout.exercises)) {
                        exercisesList = workout.exercises.map(e => e.name || 'Exercise').join(', ');
                    } else {
                        exercisesList = workout.notes || 'Workout';
                    }

                    html += `
                        <div style="background: #F0F4F8; padding: 12px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #1E40AF;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                                <p style="margin: 0; font-weight: 600; color: #1E40AF; font-size: 14px;">‚è∞ ${time}</p>
                                <span style="background: #1E40AF; color: white; padding: 3px 8px; border-radius: 12px; font-size: 11px;">#${index + 1}</span>
                            </div>
                            <p style="margin: 4px 0; font-size: 13px; color: #333;">üí™ ${exercisesList}</p>
                            <div style="display: flex; gap: 12px; margin-top: 6px;">
                                <span style="font-size: 12px; color: #666;">‚è±Ô∏è ${workout.totalDuration || 0} min</span>
                                <span style="font-size: 12px; color: #666;">üî• ${workout.totalCalories || 0} kcal</span>
                                <span style="font-size: 12px; color: #666; text-transform: capitalize;">üìä ${workout.intensity || 'Moderate'}</span>
                            </div>
                        </div>
                    `;
                });

                container.innerHTML = html;
            } catch (error) {
                console.error('Error loading date-specific workouts:', error);
                document.getElementById('date-specific-workouts').innerHTML = '<p style="color: red;">‚ö†Ô∏è Error loading data</p>';
            }
        }
    </script>
</body>

</html>
